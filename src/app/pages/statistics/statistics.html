<div class="container">
  <h1 class="title">Statistiques de mon potager</h1>

  <!-- Summary Cards -->
  <div class="stats-summary">
    <div class="stat-card">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <div class="stat-label">Total de rÃ©coltes</div>
        <div class="stat-value">{{ getTotalHarvests() }}</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ¥¬</div>
      <div class="stat-content">
        <div class="stat-label">LÃ©gume le plus rÃ©coltÃ©</div>
        <div class="stat-value">{{ getMostHarvestedVegetable() }}</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸŒ±</div>
      <div class="stat-content">
        <div class="stat-label">VariÃ©tÃ©s cultivÃ©es</div>
        <div class="stat-value">{{ vegetables.length }}</div>
      </div>
    </div>
  </div>

  <!-- Pie Chart Section - Weight -->
  <div class="chart-section" *ngIf="hasWeightVegetables()">
    <h2 class="section-title">RÃ©partition des rÃ©coltes par poids (kg)</h2>
    <div class="chart-container">
      <div *ngIf="harvests.length === 0" class="empty-chart">
        <div class="empty-icon">ğŸ“Š</div>
        <p>Aucune donnÃ©e de rÃ©colte disponible.</p>
        <p class="empty-subtitle">Ajoutez vos premiÃ¨res rÃ©coltes pour voir les statistiques.</p>
      </div>
      <canvas #pieCanvas *ngIf="harvests.length > 0"></canvas>
    </div>
  </div>

  <!-- Pie Chart Section - Pieces -->
  <div class="chart-section" *ngIf="hasPcsVegetables()">
    <h2 class="section-title">RÃ©partition des rÃ©coltes par piÃ¨ces</h2>
    <div class="chart-container">
      <div *ngIf="harvests.length === 0" class="empty-chart">
        <div class="empty-icon">ğŸ“Š</div>
        <p>Aucune donnÃ©e de rÃ©colte disponible.</p>
        <p class="empty-subtitle">Ajoutez vos premiÃ¨res rÃ©coltes pour voir les statistiques.</p>
      </div>
      <canvas #pieCanvasPcs *ngIf="harvests.length > 0"></canvas>
    </div>
  </div>

  <!-- Line Chart Section -->
  <div class="chart-section">
    <h2 class="section-title">Ã‰volution des rÃ©coltes dans le temps</h2>

    <!-- Filters -->
    <div class="filters">
      <div class="filters-header">
        <span class="filters-label">SÃ©lectionnez les lÃ©gumes Ã  afficher :</span>
        <div class="filters-actions">
          <button (click)="selectAll()" class="btn-filter btn-filter-sm">
            Tout sÃ©lectionner
          </button>
          <button (click)="deselectAll()" class="btn-filter btn-filter-sm">
            Tout dÃ©sÃ©lectionner
          </button>
        </div>
      </div>

      <div class="vegetable-filters">
        <label
          *ngFor="let veg of vegetables"
          class="filter-checkbox"
          [class.active]="isSelected(veg.name)"
        >
          <input
            type="checkbox"
            [checked]="isSelected(veg.name)"
            (change)="toggleVegetable(veg.name)"
          />
          <span class="checkbox-label">{{ veg.name }}</span>
        </label>
      </div>
    </div>

    <div class="chart-container chart-container-line">
      <div *ngIf="harvests.length === 0" class="empty-chart">
        <div class="empty-icon">ğŸ“ˆ</div>
        <p>Aucune donnÃ©e de rÃ©colte disponible.</p>
        <p class="empty-subtitle">Ajoutez vos premiÃ¨res rÃ©coltes pour voir l'Ã©volution.</p>
      </div>
      <div *ngIf="harvests.length > 0 && selectedVegetables.length === 0" class="empty-chart">
        <div class="empty-icon">ğŸ”</div>
        <p>Aucun lÃ©gume sÃ©lectionnÃ©.</p>
        <p class="empty-subtitle">SÃ©lectionnez au moins un lÃ©gume pour voir l'Ã©volution.</p>
      </div>
      <canvas #lineCanvas *ngIf="harvests.length > 0 && selectedVegetables.length > 0"></canvas>
    </div>
  </div>
</div>
